#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <util/delay.h>
#include <avr/io.h>

//anolog in
//C0-5=0-5
//digital in/out
//Di=i [0-7]
//B0=8, B1=9, B2=10, B3=11, B4=12, B5=13 [! B6&7 crystal !!]
#define LED_DDR  DDRB
#define LED_PORT PORTB
#define LED1     PORTB3
#define LED2     PORTB4

#define TTL_DDR  DDRB
#define TTL_PORT PORTB
#define TTL1     PORTB1
#define TTL2     PORTB2

//TTL1 out v -> TTL2 in . => LED1 on/off _
//loop LED2 on&off v
int main(void)
{
  unsigned char ttl;
unsigned char ttl1;
  unsigned char ttl2;
  TTL_DDR|=_BV(TTL1);//TTL output
  TTL_DDR&=~_BV(TTL2);//TTL input
  LED_DDR|=_BV(LED1)|_BV(LED2);//LED output
  while(1)
  {
    TTL_PORT|=_BV(TTL1);//TTL out on
    LED_PORT|=_BV(LED2);//LED out on

    //get TTL2
    ttl=TTL_PORT;
ttl1=ttl2=(ttl&_BV(TTL2))==_BV(TTL2);//on=true, off=false
    if(ttl2==1) LED_PORT|=_BV(LED1);//LED in on
    else LED_PORT&=~_BV(LED1);//LED in off

    _delay_ms(1000);
    TTL_PORT&=~_BV(TTL1);//TTL out off
    LED_PORT&=~_BV(LED2);//LED out off

    //get TTL2
    ttl=TTL_PORT;
    ttl2=(ttl&_BV(TTL2))==_BV(TTL2);//on=true, off=false
    if(ttl2==ttl1) LED_PORT|=_BV(LED1);//LED in on
    else LED_PORT&=~_BV(LED1);//LED in off

    _delay_ms(1000);
  }
  return (0);
}

